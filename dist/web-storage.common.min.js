/*!
 * web-storage v0.1.0
 * Author: Lin.xs | Email: yunfax@outlook.com
 * (c) 2020 Lin.xs
 * @license ISC
 */
"use strict";function t(t){return"string"==typeof t?t:"object"==typeof t?Array.isArray(t)?"["+t.toString()+"]":JSON.stringify(t):t.toString()}function e(t){var e=t.length-1,o=function(o,r){return void 0===o&&(o=""),0===t.indexOf(r[0])&&o.indexOf(r[1])===e};return o(t,["{","}"])?JSON.parse(t):o(t,["[","]"])?t.substr(1,e-1).split(","):t}function o(t,e){return t&&"string"==typeof t?!!e||(console.error('An argument for "value" was not provided.'),!1):(console.error('Argument of type "1" is not assignable to parameter of type "string".'),!1)}var r=function(){this.local=window.localStorage,this.opts={type:"d",expires:0,encrypt:!1}};r.prototype.set=function(e,r,i){void 0===i&&(i=this.opts),o(e,r)&&(i.encrypt||this.local.setItem(e,t(r)))},r.prototype.get=function(t){if(t||"string"==typeof t)return e(this.local.getItem(t))},r.prototype.update=function(t,e,o){if(void 0===o&&(o=this.opts),t||"string"==typeof t){var r=this.get(t);if(r)return this.set(t,e,o),r}},r.prototype.remove=function(t){if(t||"string"==typeof t){var o=this.get(t);if(o)return this.local.removeItem(t),e(o)}},r.prototype.key=function(t){if("number"==typeof t)return this.local.key(t)},r.prototype.clear=function(){this.local.clear()};var i=function(){this.session=window.sessionStorage,this.opts={type:"d",expires:0,encrypt:!1}};i.prototype.set=function(e,r,i){void 0===i&&(i=this.opts),o(e,r)&&(i.encrypt||this.session.setItem(e,t(r)))},i.prototype.get=function(t){if(t||"string"==typeof t)return e(this.session.getItem(t))},i.prototype.update=function(t,e,o){if(void 0===o&&(o=this.opts),t||"string"==typeof t){var r=this.get(t);if(r)return this.set(t,e,o),r}},i.prototype.remove=function(t){if(t||"string"==typeof t){var o=this.get(t);if(o)return this.session.removeItem(t),e(o)}},i.prototype.key=function(t){if("number"==typeof t)return this.session.key(t)},i.prototype.clear=function(){this.session.clear()};var n=function(){this.opts={type:"d",expires:0,encrypt:!1,path:"/"}};n.prototype.setExpiresTime=function(t,e){var o=new Date,r=+new Date;switch(t){case"m":return o.setTime(r+60*e*1e3),o.toUTCString();case"h":return o.setTime(r+3600*e*1e3),o.toUTCString();case"d":return o.setTime(r+24*e*3600*1e3),o.toUTCString();case"M":return o.setTime(r+30*e*24*3600*1e3),o.toUTCString();case"y":return o.setTime(r+365*e*24*3600*1e3),o.toUTCString();default:return o.setTime(r+24*e*3600*1e3),o.toUTCString()}},n.prototype.set=function(t,e,o){if(void 0===o&&(o=this.opts),t&&e&&"string"==typeof t&&"string"==typeof e){var r="";o.encrypt||(r+=t+"="+e),"number"==typeof o.expires&&o.expires>0&&(r+="; expires="+this.setExpiresTime(o.type,o.expires)),o.path&&""!==o.path&&"/"!==o.path&&(r+="; path="+o.path),document.cookie=r}},n.prototype.get=function(t){if((t||"string"==typeof t)&&document.cookie){var e=document.cookie.split("; "),o="";return e.forEach((function(e,r){var i=e.split("=");t===i[0]&&(o=i[1])})),o}},n.prototype.update=function(t,e,o){if(void 0===o&&(o=this.opts),t||"string"==typeof t){var r=this.get(t);return r&&this.set(t,e,o),r}},n.prototype.remove=function(t){if(t||"string"==typeof t){var e=this.get(t);return document.cookie=t+"=; expires="+this.setExpiresTime("all",-1),e}},n.prototype.key=function(t){if("number"==typeof t){var e=document.cookie.split("; "),o="";return e.forEach((function(e,r){var i=e.split("=");t===r&&(o=i[0])})),o}},n.prototype.clear=function(){var t=this;document.cookie&&document.cookie.split("; ").forEach((function(e){var o=e.split("=");document.cookie=o[0]+"=; expires="+t.setExpiresTime("all",-1)}))};var s={install:function(t,e){var o=new r,s=new i,p=new n;Object.defineProperty(t.prototype,"$webLocals",{get:function(){return o}}),Object.defineProperty(t.prototype,"$webSessions",{get:function(){return s}}),Object.defineProperty(t.prototype,"$webCookies",{get:function(){return p}})}};module.exports=s;